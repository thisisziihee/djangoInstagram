{% extends 'base.html' %}

{% block body %}
<div class = "register">
    <div class = "container">
        <br>
        <h2 class = "text-success text-center">REGISTER</h2><br>
        <hr>
        <div class = "form-group col-md-6">
            <label for = "InputUsername" class = "text-success">Username : </label>
            <input type = "text" class = "form-control" id = "username" placeholder="Enter Usernmae">
            <small id = "emailHelp" class = "form-text text-muted">We'll never share your email with anyone else.</small>
        </div>
        
        <div class = "form-group col-md-6">
            <label for = "InputEmail" class = "text-success">Email : </label>
            <input type = "email" class = "form-control" id = "email" placeholder="Enter your Email">
        </div>

        <div class = "form-group col-md-6">
            <label for = "InputPassword" class = "text-success">Password : </label>
            <input type = "password" class = "form-control" id = "password" placeholder="Enter your password">
        </div>

        <button class = "btn btn-success col-md-6" id = "register">REGISTER</button>

        <script
            src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous">
        </script>
    </div>
</div>

<script>
    $(document).ready(function(){
        $('#register').click(function() {
            $.post('/apis/user/create/', 
            {'username' : $('#username').val(), 'password': $('#password').val(), 'email' : $('#email').val()},
            function() {
                alert('가입을 환영합니다!');
                window.location = {% url 'login' %};
            }).fail(function(data){
                alert(data.responseJSON.message);
            });
        });
    });
</script>

{% endblock %}